# SonarCloud Configuration - Backend Repository
# This analyzes the entire backend repo as a single project

sonar.projectKey=Juan-Andres-Motta_proyecto-2-backend
sonar.organization=juan-andres-motta
sonar.projectName=MediSupply Backend
sonar.projectVersion=1.0

# Source code directories (all microservices)
# Note: delivery stores code at root level, not in src/ subdirectory
sonar.sources=bff,catalog/src,client/src,delivery,inventory/src,order/src,seller/src

# Exclusions - files not to analyze (including abstract ports)
sonar.exclusions=**/tests/**,**/test_*.py,**/__pycache__/**,**/migrations/**,**/alembic/**,**/.venv/**,**/venv/**,**/.pytest_cache/**,**/htmlcov/**,**/*.pyc,**/poetry.lock,**/.env,**/.env.*,**/Dockerfile,**/.dockerignore,**/docker-compose*.yml,bff/config/**,bff/app.py,bff/main.py,**/router.py,bff/dependencies.py,**/__init__.py,**/ports/**,**/port.py,**/*_port.py

# Coverage exclusions - exclude abstract interfaces (ports)
sonar.coverage.exclusions=**/ports/**,**/port.py,**/*_port.py

# Test files location
sonar.tests=bff/tests,catalog/tests,client/tests,delivery/tests,inventory/tests,order/tests,seller/tests
sonar.test.inclusions=**/test_*.py,**/tests/**

# Python version
sonar.python.version=3.13

# Coverage reports (XML format from pytest-cov)
sonar.python.coverage.reportPaths=bff/coverage.xml,catalog/coverage.xml,client/coverage.xml,delivery/coverage.xml,inventory/coverage.xml,order/coverage.xml,seller/coverage.xml

# Code duplication detection exclusions
sonar.cpd.exclusions=**/migrations/**,**/alembic/**,**/tests/**,**/test_*.py

# Duplication threshold - allow up to 5% duplication (less sensitive than default)
# Increase minimum tokens to reduce false positives (default is 100)
sonar.cpd.python.minimumtokens=150
# Increase minimum lines (default is around 5-10 lines)
sonar.cpd.python.minimumlines=10

# Source file encoding
sonar.sourceEncoding=UTF-8

# Source Control Management
sonar.scm.provider=git

# Quality Gate - wait for quality gate result
sonar.qualitygate.wait=true
sonar.qualitygate.timeout=300
